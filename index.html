<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="TouchScript">
        <meta name="author" content="Interactive Lab">
        <title>TouchScript</title>
        

        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold|PT+Sans:400,700">
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/main.css">

        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-36698945-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>
    </head>

    <body data-spy="scroll" data-target=".bs-docs-sidebar">
        <div class="container header">
            <ul>
                <li class="logo"><h2>TouchScript</h2></li>
                <li>GitHub (<a href="https://github.com/InteractiveLab/TouchScript">Unity</a>, <a href="https://github.com/InteractiveLab/TouchScript.as3">Flash</a>)</li>
                <li>|</li>
                <li><a href="files/TouchScript.2.0b3.unitypackage">Download Unity Package</a></li>
                <li>|</li>
                <li>Issues (<a href="https://github.com/InteractiveLab/TouchScript/issues">Unity</a>, <a href="https://github.com/InteractiveLab/TouchScript.as3/issues">Flash</a>)</li>
            </ul>
        </div>
        <div class="container page">
            <div id="myCarousel" class="carousel slide">
                <div class="carousel-inner">
                    <div class="active item">
                        <img src="img/slideshow/1.jpg">
                        <div class="carousel-caption">
                          <h4>“Electronic University“ system presentation</h4>
                          <p>“Electronic University“ system presentation at Far Eastern Federal University during the APEC 2012 summit in Vladivostok. <br/>Panoramic projection screen controlled from multi-touch holographic platform.</p>
                        </div>
                    </div>
                    <div class="item">
                        <img src="img/slideshow/2.jpg">
                        <div class="carousel-caption">
                          <h4>Football World Cup 2018</h4>
                          <p>8 round multi-touch displays were mounted into 18 meters wide wall in a individual pavilion. <br/>Each of them running interactive presentation of the history of all World Cups.</p>
                        </div>
                    </div>
                    <div class="item">
                        <img src="img/slideshow/3.jpg">
                        <div class="carousel-caption">
                          <h4>'Orthodox Russia' exhibition</h4>
                          <p>Multi-touch 3D globes, showing the Church's eparchies across all the continents.</p>
                        </div>
                    </div>
                    <div class="item">
                        <img src="img/slideshow/4.jpg">
                        <div class="carousel-caption">
                          <h4>UNIQLO interactive booth</h4>
                          <p>Multi-touch virtual catalog of UT t-shirts designs.</p>
                        </div>
                    </div>
                </div>
                <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
            </div>
        </div>
        <div class="container page">
            <div class="row">
                <div class="span3 bs-docs-sidebar">
                    <ul class="nav nav-list bs-docs-sidenav">
                        <li><a href="#touchscript"><i class="icon-chevron-right"></i> TouchScript</a></li>
                        <li><a href="#versions"><i class="icon-chevron-right"></i> Versions</a></li>
                        <li><a href="#docs"><i class="icon-chevron-right"></i> Documentation</a></li>
                        <li><a href="#description"><i class="icon-chevron-right"></i> Description</a></li>
                        <li><a href="#examples"><i class="icon-chevron-right"></i> Examples</a></li>
                        <li><a href="#tutorials_basic"><i class="icon-chevron-right"></i> Tutorials: Basic</a></li>
                        <li><a href="#tutorials_advanced"><i class="icon-chevron-right"></i> Tutorials: Advanced</a></li>
                        <li><a href="#tutorials_flash"><i class="icon-chevron-right"></i> Tutorials: Flash</a></li>
                        <li><a href="#history   "><i class="icon-chevron-right"></i> Versions history</a></li>
                    </ul>
                </div>
                <div class="span9">
                    <section id="touchscript">
                        <h2>TouchScript</h2>
                        <h4>Multi-touch framework for Unity3d and Flash</h4>
                        <p><code>TouchScript</code> is a family of multi-touch frameworks for Unity3d and Flash. It is much more than a handful of routines to receive touch events from different sources. Inspired by iOS, TouchScript makes handling complex gesture interactions on large touch surfaces much easier. Unity3d and Flash implementations are developed to work together in Scaleform environment.<br/></p>

                        <h4>Features</h4>
                        <p><ul>
                        <li>Easy and intuitive API.</li>
                        <li>Works on PC, Mac, iOS and Android.</li>
                        <li>Manages simultaneous gesture recognition within scene hierarchy (inspired by iOS).</li>
                        <li>Comes with many commonly used gestures. Easy to write custom ones.</li>
                        <li>Supported input sources: TUIO, mouse, iOS and native Windows 7 touch.</li>
                        <li>Groups touch points into clusters on big touch surfaces.</li>
                        <li>Easy to test multi-touch gestures without actual multi-touch device using <a href="https://itunes.apple.com/us/app/tuiopad/id412446962">TUIOPad on iOs</a> or <a href="https://play.google.com/store/apps/details?id=tuioDroid.impl&hl=en">TUIODroid on Android</a>.</li>
                        <li>It's free and open-source. Licensed under MIT license.</li>
                        </p>
                    </section>
                    <section id="versions">    
                        <h2>Versions</h2>
                        <p><code>TouchScript</code> was originally developed in ActionScript 3 for Flash, rewritten from scratch in C# for Unity3d and at the moment Unity3d branch is where most of the development takes place. AS3 version as a little brother gets all the new features with a slight delay.<br/></p>

                        <h4>Unity3d</h4>
                        <p><ul>
                        <li>Written in C#, uses standard C# event system.</li>
                        <li>Tested with Unity 3.5.x and 4.x.</li>
                        <li>Handles touch points mapping from screen space to 3d space.</li>
                        <li>Supports native touch events on iOS and Android.</li>
                        </ul></p>

                        <h4>Flash</h4>
                        <p><ul>
                        <li>Written in AS3, API is mostly the same as in Unity3d version.</li>
                        <li>Tested with recent Flash Player versions and SDKs.</li>
                        <li>Can receive touch events from Unity3d if running in Scaleform for Unity3d integration layer.</li>
                        <li>Works standalone, in Scaleform and in iOS/Android apps.</li>
                        </ul></p>
                    </section>
                    <section id="docs">
                        <h2>Help and Documentation</h2>
                        <p><ul>
                            <li><a href="docs/Index.html">Up-to-date Unity3d documentation</a>.</li>
                            <li>Flash documentation is not yet available.</li>
                        </ul></p>
                        <p>If you have any questions feel free to ask them at <a href="https://github.com/InteractiveLab/TouchScript/issues">the issues section</a> on GitHub.</p>
                    </section>
                    <section id="description">
                        <h2>Description</h2>
                        <p><code>TouchScript</code> consists of a number of components to configure touch and gesture recognition plus common gesture implementations. Gesture recognition works very similar to iOS: a number of gesture recognizers (called simply Gestures) attached to scene objects (GameObject in Unity3d and InteractiveObject in AS3) receive touch point events and change state if they recognize a sequence of touch events as a gesture. If there are no active gestures in recognized gesture's hierarchy (or it can work in parallel with exhisting active gestures) it is added in the list of active gestures for an object it is attached to and now can exclusively receive touch events from that object and its children.</p>
                        <p>This approach makes it very easy to code complex multi-touch interfaces. For example, you got a window and several buttons as its children. You want to be able to drag both windows and tap buttons. It gets complicated when user presses a button and starts dragging it. TouchScript handles this for you.</p>

                        <h4>Unity3d</h4>
                        <p>The latest stable version can be found in <a href="https://github.com/InteractiveLab/TouchScript">Master branch on GitHub</a>.<br/><a href="https://github.com/InteractiveLab/TouchScript/tree/develop">Develop branch</a> is usually more up-to-date but may contain more bugs.</p>
                        <h5><span class="label label-important">NOTE:</span> Known limitations</h5>
                        <ul>
                        <li>Windows 7 touch recognition doesn't work in Unity IDE.</li>
                        <li>The library relies on C# events so it doesn't work with JavaScript.</li>
                        </ul>
                        <h5>Before building: Windows</h5>
                        <p>Copy <code>UnityEngine.dll</code> and <code>UnityEditor.dll</code> to <code>Lib</code> folder since the framework links to it. If anyone knows a better way of doing this without hardcoding paths or setting system variables, please let us know.</p>
                        <h5>Before building: OS X</h5>
                        <p>Copy <code>UnityEngine.dll</code> and <code>UnityEditor.dll</code> to <code>Lib</code> folder.<br/>
                        They are probably located here: <code>/Applications/Unity/Unity.app/Contents/Frameworks/Managed/</code>.</p>

                        <h4>Flash</h4>
                        <p>The latest stable version can be found in <a href="https://github.com/InteractiveLab/TouchScript.as3">Master branch on GitHub</a>.<br/><a href="https://github.com/InteractiveLab/TouchScript.as3/tree/develop">Develop branch</a> is usually more up-to-date but may contain more bugs.</p>
                    </section>

                    <section id="examples">
                        <h2>Examples</h2>
                        <h4>Unity3d</h4>
                        <p>Unity3d examples can be found in <em>\Examples\General Examples\</em> project, <em>\Examples\Scaleform Examples\</em> project or in <em>Examples</em> folder in Unity package.</p>
                        <p>There are three examples:
                        <ol>
                        <li><b>Basic</b> — shows how to set up the environment and how Tap gesture works.</li>
                        <li><b>Everything Combined</b> — shows how to work with layers and different gestures in hierarchy.</li>
                        <li><b>Basic Scaleform</b> — shows how to use Unity3d TouchScript combined with AS3 TouchScript. Uses <em>TestScaleformProject</em> from Flash examples. Requires licensed or trial <em>Scaleform for Unity3d</em>. Just copy DLL and .cs files where they are in Scaleform examples.</li>
                        </ol></p>

                        <h4>Flash</h4>
                        <p>Flash examples can be found in <em>\Examples\TestProject\</em> and <em>\Examples\TestScaleformProject\</em> projects.</p>
                        <p>There are two examples:
                        <ol>
                        <li><b>TestProject</b> — shows how to set up the environment and how most of the gestures work.</li>
                        <li><b>TestScaleformProject</b> — used with <em>Basic Scaleform</em>, handles touch events coming from Unity via <em>ScaleformInput</em>.</li>
                        </ol></p>
                    </section> 

                    <section id="tutorials_basic">
                        <h2>Tutorials: Basic</h2>
                        <p><code>1.</code> <b>Create a new project.</b></p>
                        <p><code>2.</code> <b>Either import <code>TouchScript.unitypackage</code> or copy <code>TouchScript</code> folder from examples to <em>Assets</em> folder.</b></p>
                        <p>Drag and drop <code>Debug Camera</code> from <em>TouchScript/Prefabs</em> folder to see where your touch points lend.</p>
                        <p>Now if you press Play you can click anywhere in Game view and a nice cian touch cursor with id will appear. The library automatically created <code>TouchScript</code> GameObject in Scene Hierarchy with <code>Touch Manager</code> and <code>Mouse Input</code> Behaviors attached. They are created automatically if no <em>Touch Manager</em> and <em>Input Source</em> instance exhist. If run on a tablet <code>Mobile Input</code> is created instead.</p>
                        <p>A good practice is to create them manually because this way you can set their parameters and add more input sources.</p>
                        <p><code>3.</code> <b>Create a new GameObject named <em>TouchScript</em>.</b></p>
                        <p>Actually, it doesn't matter how you call it.</p>
                        <p><code>4.</code> <b>Add <code>Touch Manager</code> and <code>Mouse Input</code> behaviors to this GameObject.</b></p>
                        <p>If you press Play you'll see the same behavior as before. But now you can add <code>TUIO Input</code> which will be listening for touch data at port <em>3333</em> and you can use <a href="https://itunes.apple.com/us/app/tuiopad/id412446962">TUIOPad on iOs</a> or <a href="https://play.google.com/store/apps/details?id=tuioDroid.impl&hl=en">TUIODroid on Android</a> to test multi-touch interaction.</p>
                        <p><code>5.</code> <b>Add a plane, some lights and a simple Cube with <code>Rigid Body</code> component attached.</b></p>
                        <p><code>6.</code> <b>Make a prefab from it.</b></p>
                        <p>You'll end up with something like this:</p>
                        <p><img src="img/tutorial-u-1/1.png" width="690" height="222"/></p>
                        <p><code>7.</code> <b>Create a simple c# script file, call it <code>Breaker</code>.</b></p>
                        <p>Paste this code:</p>
                        <pre class="prettyprint linenums lang-csh">
using UnityEngine;
using TouchScript.Gestures;

public class Breaker : MonoBehaviour
{
    public Transform CubePrefab;
    public float Power = 10.0f;

    private Vector3[] directions = {
                                   new Vector3(1, -1, 1),
                                   new Vector3(-1, -1, 1),
                                   new Vector3(-1, -1, -1),
                                   new Vector3(1, -1, -1),
                                   new Vector3(1, 1, 1),
                                   new Vector3(-1, 1, 1),
                                   new Vector3(-1, 1, -1),
                                   new Vector3(1, 1, -1)
                               };

    private void Start()
    {
        GetComponent&lt;TapGesture>().StateChanged += HandleStateChanged;
    }

    private void HandleStateChanged(object sender, TouchScript.Events.GestureStateChangeEventArgs e)
    {
        if (e.State == Gesture.GestureState.Recognized)
        {
            if (transform.localScale.x > 0.05f)
            {
                Color color = new Color(Random.value, Random.value, Random.value);
                for (int i = 0; i < 8; i++)
                {
                    var c = Instantiate(CubePrefab) as Transform;
                    c.parent = transform.parent;
                    c.name = "Cube";
                    c.localScale = 0.5f*transform.localScale;
                    c.position = transform.TransformPoint(c.localScale.x/10.0f*directions[i]);
                    c.rigidbody.velocity = Power*Random.insideUnitSphere;
                    c.renderer.material.color = color;
                }
            }
            Destroy(gameObject);
        }
    }
}
</pre>
                        <p><code>8.</code> <b>Add it to the cube prefab and assign it as a value of <em>Cube Prefab</em> property.</b></p>
                        <p>Press Play and test how <code>Tap Gesture</code> works by clicking the cubes. For better experience get an iPad and run TUIOPad on it.</p>
                        <p><img src="img/tutorial-u-1/2.png" width="690" height="222"/></p><br/>
                        <p>Now let's get back to the code. Line 22.</p>
                        <pre class="prettyprint linenums lang-csh">
GetComponent&lt;TapGesture>().StateChanged += HandleStateChanged;
</pre>
                        <p>To get notified when a gesture is recognized you need to subscribe to its <code>StateChanged</code> event.</p>
                        <pre class="prettyprint linenums lang-csh">
if (e.State == Gesture.GestureState.Recognized)
</pre>
                        <p>At line 27 we check if this state change is indeed what we are interested in — <code>GestureState.Recognized</code>, because gestures change states all the time. Most common ones are <code>Possible</code> and <code>Failed</code>.</p>
                        <p>After that the cube just spawns 8 smaller copies and destroys itself.</p>
                    </section>

                    <section id="tutorials_advanced">
                        <h2>Tutorials: Advanced</h4>
                        <p>In this tutorial we will not build a scene from scratch. Instead we will look at the exhisting example.</p>
                        <p><img src="img/tutorial-u-2/2.png" width="690" height="250"/></p>
                        <p>Open <code>Everything Combined Example.unity</code> from default examples. You'll see a strange structure made of cubes and 3 colored cubes on foreground. First of all let's take a look at <code>TouchScript</code> GameObject.</p>
                        <p><img src="img/tutorial-u-2/1.png" width="210" height="93" style="margin-right: 10px; float: left"/>Notice that now we got two camera layers. They are attached to <code>2d Camera</code> and <code>3d Camera</code>. Layers is a way to specify the order in which the library looks for objects hit by touch points. In this example the topmost camera rendering 2d RGB buttons is tested first and after that the 3d camera is used. If there's no layer in scene the library adds one to the main camera.</p>
                        <p>Now let's check the RGB buttons which are seen by <code>2d Camera</code>. They got several scripts attached:
                            <ul>
                                <li><code>Button</code> — listens for <code>Long Press Gesture</code> and changes main cube's color.</li>
                                <li><code>Long Press Gesture</code> — fires if a user have been holding a button for more than a second.</li>
                                <li><code>Press Gesture</code> — fires when an object is pressed.</li>
                                <li><code>Release Gesture</code> — fires when an object is released.</li>
                                <li><code>Bump</code> — listens for <code>Press Gesture</code> and <code>Release Gesture</code> to change scale.</li>
                            </ul></p>
                        <p><img src="img/tutorial-u-2/3.png" width="690" height="274"/></p>
                        <p>Listening for gesture events is simple. This is pretty much all the code in <code>Bump</code> component:</p>
                        <pre class="prettyprint linenums lang-csh">
private void Start()
{
    if (GetComponent&lt;PressGesture>() != null) GetComponent&lt;PressGesture>().StateChanged += onPress;
    if (GetComponent&lt;ReleaseGesture>() != null) GetComponent&lt;ReleaseGesture>().StateChanged += onRelease;

    startScale = transform.localScale;
}

private void onRelease(object sender, GestureStateChangeEventArgs e)
{
    if (e.State == Gesture.GestureState.Recognized)
        transform.localScale = startScale;
}

private void onPress(object sender, GestureStateChangeEventArgs e)
{
    if (e.State == Gesture.GestureState.Recognized)
        transform.localScale = startScale*.7f;
}
</pre>
                    <p>The rest of the cubes are more interesting. Check out the hierarchy starting from <code>Cubes</code> GameObject.</p>
                    <p>Every object in hierarchy got a gesture or two attached:
                    <ul>
                        <li><code>Cubes</code> can be rotated with a gesture involving two or more fingers.</li>
                        <li><code>Big Cube</code> can be rotated and scaled separately.</li>
                        <li>Each <code>Side</code> can be moved away from face it is attached to.</li>
                        <li>There are <code>Buttons</code> on every side which can be pressed to rotate the whole structure.</li>
                    </ul></p>
                    <p><img src="img/tutorial-u-2/4.png" width="210" height="212" style="margin-right: 10px; float: left"/>The structure consists of a big cube and six sides. Every side has a yellow button.</p>
                    <p>And all these gestures work together. For example check out <code>Scale Gesture</code> on <code>Big Cube</code>. In <code>Will Recognize With</code> array it got a link to <code>Rotate Gesture</code> on the same object which says that these two gestures can work together, so the object can be rotated and scaled simultaneously.</p>
                    <p>Press Play and try to work with the structure. Would be better if you had a multi-touch enabled device or used TUIOPad.</p><br/><br/>
                </section>

                <section id="tutorials_flash">
                    <h2>Tutorials: Flash</h2>
                    <p>Let's check out how <code>TestProject</code> is done.</p>
                    <p><code>TestProject.as</code> contains initialization code:</p>
                    <pre class="prettyprint linenums lang-as3">
TouchManager.init(stage);
_mouseInput = new MouseInput(stage);
_tuioInput = new TuioInput(stage.stageWidth, stage.stageHeight);
addChild(new TouchDebugger());
</pre>
                    <p>It sets up a <code>Mouse Input</code> and a <code>TUIO Input</code> to test multi-touch gestures.</p>
                    <p>Inside <code>Example1</code> class you'll see how the whole scene is constructed. There are many boxes placed within other boxes and several gestures attached to them.</p>
                    <pre class="prettyprint linenums lang-as3">
var tapGesture:TapGesture = new TapGesture(tap1);
tapGesture.addEventListener(GestureEvent.STATE_CHANGED, handler_tap_tapped);

private function handler_tap_tapped(e:GestureEvent):void {
    if (e.state == GestureState.RECOGNIZED) {
        ((e.target as Gesture).displayTarget as Box).setColor(Defaults.randomColor());
    }
}
</pre>
                    <p>This is the simplest way to add a <code>Tap Gesture</code> to an <em>InteractiveObject</em>.</p>
                    <p>To allow gestures work together use <code>shouldRecognizeSimultaneouslyWith</code> which must be called at least once per pair of gestures:</p>
                    <pre class="prettyprint linenums lang-as3">
panGesture.shouldRecognizeSimultaneouslyWith(scaleGesture, true);
panGesture.shouldRecognizeSimultaneouslyWith(rotateGesture, true);
scaleGesture.shouldRecognizeSimultaneouslyWith(rotateGesture, true);
</pre>
                    <p>The final result is not that pretty but clearly shows how to work with gestures in <code>ActionScript 3</code>.</p>
                    <p><img src="img/tutorial-f-1/1.png" width="690" height="121"/></p>
                    </section>
                    <section id="history">
                        <h2>Version history - Unity3d:</h2>
                        <h4>2.0b3</h4>
                        <p><ul>
                        <li>Major refactoring.</li>
                        <li>Added layers system.</li>
                        <li>Added custom editors to major components.</li>
                        <li>Setting up a scene is now much easier.</li>
                        <li>Added good examples and docs.</li>
                        <li>Integrated Scaleform.</li>
                        <li>Added iOS and Android support.</li>
                        <li>Fixed several nasty bugs.</li>
                        </ul></p>

                        <h4>1.0.1</h4>
                        <p><ul>
                        <li>Fixed several bugs.</li>
                        </ul></p>

                        <h4>1.0</h4>
                        <p><ul>
                        <li>First release.</li>
                        </ul></p>

                        <h2>Version history - Flash:</h2>
                        <h4>1.1</h4>
                        <p><ul>
                        <li>Added Scaleform support.</li>
                        </ul></p>

                        <h4>1.0</h4>
                        <p><ul>
                        <li>First release. Cloned functionality from Unity3d repo.</li>
                        </ul></p>
                    </section>
                </div>
            </div>
        </div>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/prettify.js"></script>
        <script type="text/javascript">
            !function ($) {
              $(function(){
                var $window = $(window)

                // make code pretty
                window.prettyPrint && prettyPrint()

                // side bar
                $('.bs-docs-sidenav').affix({
                  offset: {
                    top: function () { return $window.width() <= 980 ? 290 : 694 }
                  , bottom: 270
                  }
                })

                // carousel
                $('.carousel').carousel({
                    interval: 5000,
                    pause: "hover"
                })

              })
            }(window.jQuery)

        </script>
    </body>
</html>
